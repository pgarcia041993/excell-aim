<div style="width: 200px;">
  <div>
    <div class="tile bg-cyan">
      <div class="brand">
        <div class="badge"><%= @registration_transactions.count %></div>
        <div class="tile-status">
          <span class="name">Total Registrations</span>
        </div>
      </div>
    </div>
  </div>

  <div>
    <div class="tile bg-darkRed">
      <div class="brand">
        <div class="badge"><%= RegistrationTransaction.paid_registrations %></div>
        <div class="tile-status">
          <span class="name">Paid Registrations</span>
        </div>
      </div>
    </div>
  </div>
</div>

<h1>Registrations</h1>

<table class="striped">
  <tr>
    <th>Name</th>
    <th>Email</th>
    <th>Program</th>
    <th>Invoice Number</th>
    <th>Invoice Amount</th>
    <th>Payment Status</th>
    <th>Payment Reference Number</th>
    <th>Payment Date</th>
    <th>Actions</th>
    <th></th>
    <th></th>
  </tr>

  <% @registration_transactions.each do |registration_transaction| %>
      <tr>
        <td><%= registration_transaction.name %></td>
        <td><%= registration_transaction.email %></td>
        <td><%= registration_transaction.program.try(:name) %></td>
        <td><%= registration_transaction.invoice_number %></td>
        <td><%= number_with_delimiter(number_with_precision(registration_transaction.invoice_amount, :precision => 2)) %></td>
        <td><%= registration_transaction.payment_receipt.try(:present?) ? 'Paid' : 'Not Yet Paid' %></td>
        <td><%= registration_transaction.payment_receipt.try(:receipt_number) %></td>
        <td><%= registration_transaction.payment_receipt.try(:created_at).try(:strftime, '%m/%d/%Y %H:%M') %></td>
        <td><%= link_to 'Edit', edit_registration_transaction_path(registration_transaction), :class => 'button info' %></td>
        <td><%= link_to 'Delete', registration_transaction, method: :delete, data: {confirm: 'Are you sure?'}, :class => 'button danger' %></td>
      </tr>
  <% end %>
</table>

<br/>

<%= link_to 'Register New Individual', new_registration_transaction_path, :class => 'button primary' %>
